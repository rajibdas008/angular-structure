<div class="gintaa-junctions-wrapper">
	<div class="junction-header-row">
		<div class="row">
			<div class="col-lg-12 col-md-12 col-sm-12">
				<div class="junction-header-group">
					<div class="junction-delivery gintaa-junction-meet">
						<div class="store-icon-shopping">
							<span class="material-icons-outlined">storefront</span>
						</div>
						<div class="delivery-store-text">
							<h2>
								<span class="gintaa-upper"><span>g</span>intaa</span>
								junction
							</h2>
							<h4>Meet at <span>gintaa</span> Secure Junction</h4>
						</div>
					</div>
					<div class="remove-store-page" (click)="closeGintaaJuctionModal(false)">
						<span class="material-icons">close</span>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="store-list-row">
		<div class="row">
			<div class="col-lg-7 col-md-12 col-sm-12 jun-border-right border-none">
				<div class="junction-left-group">
					<mat-accordion>
						<mat-expansion-panel (opened)="showAllJunctionPanel = false"
							(closed)="showAllJunctionPanel = true" [expanded]="!showAllJunctionPanel">
							<mat-expansion-panel-header>
								<mat-panel-title>
									<h2 class="user-junction">
										Nearest GINTAA Junction for You and
										{{ offerOwnerName }}
									</h2>
								</mat-panel-title>
							</mat-expansion-panel-header>
							<div class="loader-screen" *ngIf="showLoader">
								<i class="fa fa-spinner fa-spin"></i> Loading
								Junctions...
							</div>
							<div class="store-listing" *ngFor="let junction of gintaJunctions">
								<div class="store-list-row">
									<mat-radio-group aria-labelledby="junction-radio-button-label"
										[(ngModel)]="selectedGintaaJunctionId">
										<mat-radio-button [value]="junction.id" (change)="
												chooseJunction($event, junction)
											">
											<div class="img-des-group">
												<div class="store-image">
													<img [src]="
															junction
																.imageURLs[0]
														" [alt]="junction.name" class="img-fluid store-img" />
												</div>
												<div class="store-description">
													<h2>{{ junction.name }}</h2>
													<h6>
														{{ junction.address }}
													</h6>
												</div>
											</div>
											<div class="jun-km">
												<h6>
													{{ junction.distance }} km
												</h6>
											</div>
										</mat-radio-button>
									</mat-radio-group>
								</div>
							</div>
						</mat-expansion-panel>

						<mat-expansion-panel [expanded]="showAllJunctionPanel" (opened)="showAllJunctionPanel = true"
							(closed)="showAllJunctionPanel = false">
							<mat-expansion-panel-header>
								<mat-panel-title>
									<h4 class="others-junction">
										See others GINTAA Junction
									</h4>
								</mat-panel-title>
							</mat-expansion-panel-header>

							<div class="search-store">
								<form class="example-form">
									<input class="form-control-search" type="text" name="search"
										[(ngModel)]="searchText" placeholder="search a gintaa junction" />
								</form>
							</div>
							<div class="store-listing" *ngFor="
									let junction of gintaJunctions
										| junctionNameFilter: searchText
								">
								<div class="store-list-row">
									<mat-radio-group aria-labelledby="junction-radio-button-label"
										[(ngModel)]="selectedGintaaJunctionId">
										<mat-radio-button [value]="junction.id" (change)="
												focusJunction($event, junction)
											">
											<div class="img-des-group">
												<div class="store-image">
													<img [src]="
															junction
																.imageURLs[0]
														" [alt]="junction.name" class="img-fluid store-img" />
												</div>
												<div class="store-description">
													<h2>{{ junction.name }}</h2>
													<h6>
														{{ junction.address }}
													</h6>
												</div>
											</div>
										</mat-radio-button>
									</mat-radio-group>
									<div class="jun-km" *ngIf="false">
										<h6>1 km</h6>
									</div>
								</div>
							</div>
						</mat-expansion-panel>
					</mat-accordion>
				</div>
			</div>
			<div class="col-lg-5 col-md-12 col-sm-12">
				<!-- <div class="store-noaddress-row">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                             <div class="map-view-store">
                                  no address image
                             </div>                            
                        </div>  
                   </div>
                 </div> -->

				<div class="store-details" *ngIf="selectedJunctionDetails">
					<div class="store-map-row">
						<div class="row">
							<div class="col-lg-12 col-md-12 col-sm-12 pl-jun">
								<div class="map-view-store">
									<agm-map [latitude]="getMapLat()" [longitude]="getMapLng()" [zoom]="getZoom()">
										<agm-marker *ngFor="let m of mapMarkers" [latitude]="m.lat" [longitude]="m.lng"
											[label]="m.label" [title]="m.name" [markerDraggable]="m.draggable">
											<agm-info-window [isOpen]="
													isInfoWindowOpen(m.id)
												">
												<strong style="color: #000000">{{ m.name }}</strong>
											</agm-info-window>
										</agm-marker>

										<!-- <agm-polyline [strokeColor]="'#2196f3'">
                                                       <ng-container *ngFor="let m of mapMarkers">
                                                            <agm-polyline-point
                                                                 [latitude]="formatLatLng(m.lat)"
                                                                 [longitude]="formatLatLng(m.lng)"></agm-polyline-point>
                                                            
                                                       </ng-container>
                                                  </agm-polyline> -->

										<agm-direction *ngIf="showMapDirection" [origin]="origin"
											[destination]="destination" [travelMode]="travelMode"></agm-direction>
									</agm-map>
								</div>
							</div>
						</div>
					</div>
					<div class="store-img-row" *ngIf="selectedJunctionDetails.imageURLs.length > 0">
						<div class="row">
							<div class="col-lg-12 col-md-12 col-sm-12 pl-jun">
								<div class="store-view-img">
									<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
										<ol class="carousel-indicators">
											<li *ngFor="
													let image of selectedJunctionDetails.imageURLs;
													let i = index
												" data-target="#carouselExampleIndicators" [attr.data-slide-to]="i" [ngClass]="{ active: i === 0 }"></li>
										</ol>
										<div class="carousel-inner">
											<div *ngFor="
													let image of selectedJunctionDetails.imageURLs;
													let i = index
												" class="carousel-item" [ngClass]="{ active: i === 0 }">
												<img class="d-block w-100" [src]="image" [alt]="
														selectedJunctionDetails.name
													" />
											</div>
										</div>
										<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button"
											data-slide="prev">
											<span class="carousel-control-prev-icon" aria-hidden="true"></span>
											<span class="sr-only">Previous</span>
										</a>
										<a class="carousel-control-next" href="#carouselExampleIndicators" role="button"
											data-slide="next">
											<span class="carousel-control-next-icon" aria-hidden="true"></span>
											<span class="sr-only">Next</span>
										</a>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="store-group">
						<div class="store-title-row">
							<div class="row">
								<div class="col-lg-12 col-md-12 col-sm-12 pl-jun">
									<div class="store-title-view">
										<h2>
											{{ selectedJunctionDetails.name }}
										</h2>
									</div>
								</div>
							</div>
						</div>

						<div class="store-address-row">
							<div class="row">
								<div class="col-lg-12 col-md-12 col-sm-12 pl-jun">
									<div class="store-address">
										<h2>
											<span class="material-icons-outlined">location_on</span>
											{{
												selectedJunctionDetails.address
											}}
										</h2>
									</div>
									<div class="store-time">
										<h3>
											<span class="material-icons">access_time</span>
											{{
												selectedJunctionDetails.currentState
											}}
											NOW
											<ng-container *ngIf="
													selectedJunctionDetails.openTime &&
													selectedJunctionDetails.closeTime
												">
												{{
													selectedJunctionDetails.openTime
												}}â€“{{
													selectedJunctionDetails.closeTime
												}}
											</ng-container>
										</h3>
									</div>
									<ng-container *ngIf="
											selectedJunctionDetails.contactInformation &&
											selectedJunctionDetails
												.contactInformation.phoneNumbers
												.length > 0
										">
										<div class="store-call-number">
											<h4>
												<span class="material-icons call-custom-span">call</span>
												<span class="store-number" *ngFor="
														let phone of selectedJunctionDetails
															.contactInformation
															.phoneNumbers
													">{{ phone }}</span>
											</h4>
										</div>
									</ng-container>

									<div class="store-direction">
										<h5>
											<span class="material-icons">directions</span>
											<a (click)="generateGoogleMapLink()">View direction on google map</a>
										</h5>
									</div>
								</div>
							</div>
						</div>

						<div class="store-date-row">
							<div class="row">
								<div class="col-lg-12 col-md-12 col-sm-12 pl-jun">
									<div class="store-title-date">
										<h2>
											Select meeting date and time
											<span class="material-icons">star</span>
										</h2>
									</div>
									<div class="date-time-sh">
										<!-- <div class="date-jun">Tuesday, 12 August </div> -->
										<!-- <mat-form-field class="example-full-width" appearance="fill">
                                                       <mat-label>Choose a date</mat-label>
                                                       <input matInput [matDatepicker]="picker"
                                                            [value]="initialMeetingDate"
                                                            [min]="minimumDate"
                                                            (dateChange)="setMeetingDate($event)"
                                                            readonly />
                                                       <mat-datepicker #picker panelClass="datepicker-one-custom">
                                                            </mat-datepicker>
                                                  </mat-form-field>
                                                  <div class="line-jun">-</div>
                                                  <button class="add-time" mat-raised-button (click)="picker.open()">Add time</button> -->
										<mat-form-field>
											<input matInput [ngxMatDatetimePicker]="picker" [value]="initialMeetingDate"
												[min]="minimumDate" class="color-black" (dateChange)="
													setMeetingDate($event)
												" />

											<!-- 
                                                            [formControl]="initialMeetingDate"
                                                            [min]="minimumDate"
                                                            [max]="maxDate"
                                                            [disabled]="disabled" 
                                                       -->

											<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
											<ngx-mat-datetime-picker #picker panelClass="datepicker-one-custom"
												[showSpinners]="
													dateTimePicker.showSpinners
												" [showSeconds]="
													dateTimePicker.showSeconds
												" [stepHour]="
													dateTimePicker.stepHour
												" [stepMinute]="
													dateTimePicker.stepMinute
												" [stepSecond]="
													dateTimePicker.stepSecond
												" [touchUi]="
													dateTimePicker.touchUi
												" [color]="dateTimePicker.color" [hideTime]="
													dateTimePicker.hideTime
												">
											</ngx-mat-datetime-picker>

											<!-- 
                                                            [enableMeridian]="enableMeridian" 
                                                            [disableMinute]="disableMinute" 
                                                       -->
										</mat-form-field>
									</div>
								</div>
							</div>
						</div>

						<div class="store-select-row">
							<div class="row">
								<div class="col-lg-12 col-md-12 col-sm-12 pl-jun">
									<div class="store-select">
										<button class="junction-btn" (click)="
												closeGintaaJuctionModal(true)
											">
											<span class="material-icons-outlined">storefront</span>
											Select junction
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>